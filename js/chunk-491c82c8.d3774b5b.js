(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-491c82c8"],{1602:function(t,e,a){},2423:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return o})),a.d(e,"h",(function(){return c})),a.d(e,"i",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"k",(function(){return i})),a.d(e,"f",(function(){return m})),a.d(e,"a",(function(){return d})),a.d(e,"c",(function(){return p})),a.d(e,"j",(function(){return b}));var n=a("b775");const r=t=>Object(n["a"])({method:"GET",url:"/mp/v1_0/articles",params:t}),s=()=>Object(n["a"])({method:"GET",url:"/mp/v1_0/channels"}),o=t=>Object(n["a"])({method:"DELETE",url:"/mp/v1_0/articles/"+t}),c=(t,e=!1)=>Object(n["a"])({method:"POST",url:"/mp/v1_0/articles",params:{draft:e},data:t}),l=(t,e,a=!1)=>Object(n["a"])({method:"PUT",url:"/mp/v1_0/articles/"+t,params:{draft:a},data:e}),u=t=>Object(n["a"])({method:"GET",url:"/mp/v1_0/articles/"+t}),i=t=>Object(n["a"])({method:"POST",url:"/mp/v1_0/user/images",data:t}),m=t=>Object(n["a"])({method:"GET",url:"/mp/v1_0/user/images",params:t}),d=(t,e)=>Object(n["a"])({method:"PUT",url:"/mp/v1_0/user/images/"+t,data:{collect:e}}),p=t=>Object(n["a"])({method:"DELETE",url:"/mp/v1_0/user/images/"+t}),b=(t,e)=>Object(n["a"])({method:"PUT",url:"/mp/v1_0/comments/status",params:{article_id:t},data:{allow_comment:e}})},"58f6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-container"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:"/layout"}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("评论管理")])],1)],1),e("el-table",{staticClass:"table-list",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"","max-height":"370"}},[e("el-table-column",{attrs:{prop:"title",label:"标题"}}),e("el-table-column",{attrs:{prop:"total_comment_count",label:"总评论数"}}),e("el-table-column",{attrs:{prop:"fans_comment_count",label:"粉丝评论数"}}),e("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.comment_status?"正常":"关闭")+" ")]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",disabled:a.row.statusDisable},on:{change:function(e){return t.editComment(a.row)}},model:{value:a.row.comment_status,callback:function(e){t.$set(a.row,"comment_status",e)},expression:"scope.row.comment_status"}})]}}])})],1),e("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}}})],1)],1)},r=[],s=a("2423"),o={name:"CommentIndex",data(){return{tableData:[],totalCount:0,pageSize:10,page:1}},created(){this.loadArticle()},methods:{loadArticle(t=1){this.page=t,Object(s["d"])({response_type:"comment",page:t,per_page:this.pageSize}).then(t=>{console.log(t);const{results:e,total_count:a}=t.data.data;e.forEach(t=>{t.statusDisable=!1}),this.tableData=e,this.totalCount=a})},handleSizeChange(){this.loadArticle(1)},handleCurrentChange(t){this.loadArticle(t)},editComment(t){t.statusDisable=!0,Object(s["j"])(t.id.toString(),t.comment_status).then(e=>{t.statusDisable=!1,this.$message({type:"success",message:t.comment_status?"开启成功！":"关闭成功！"})})}}},c=o,l=(a("5f77"),a("2877")),u=Object(l["a"])(c,n,r,!1,null,null,null);e["default"]=u.exports},"5f77":function(t,e,a){"use strict";a("1602")}}]);
//# sourceMappingURL=chunk-491c82c8.d3774b5b.js.map