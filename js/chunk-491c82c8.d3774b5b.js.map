{"version":3,"sources":["webpack:///./src/api/article.js","webpack:///./src/views/comment/index.vue","webpack:///src/views/comment/index.vue","webpack:///./src/views/comment/index.vue?f4ef","webpack:///./src/views/comment/index.vue?a3d1","webpack:///./src/views/comment/index.vue?e3c6"],"names":["getArticle","params","request","method","url","getChannels","deleteArticle","id","publishArticle","data","draft","updateArticle","getOneArticle","uploadImage","getImages","pageData","collectImage","collect","deleteImage","updateComment","allowComment","article_id","allow_comment","render","_vm","this","_c","_self","staticClass","attrs","slot","_v","staticStyle","tableData","scopedSlots","_u","key","fn","scope","_s","row","comment_status","statusDisable","on","$event","editComment","model","value","callback","$$v","$set","expression","page","pageSize","totalCount","handleSizeChange","handleCurrentChange","staticRenderFns","name","created","methods","loadArticle","response_type","per_page","console","results","total_count","item","article","type","message","component"],"mappings":"uIAAA,sYAKO,MAAMA,EAAaC,GACjBC,eAAQ,CACbC,OAAQ,MACRC,IAAK,oBACLH,WAISI,EAAc,IAClBH,eAAQ,CACbC,OAAQ,MACRC,IAAK,sBAIIE,EAAgBC,GACpBL,eAAQ,CACbC,OAAQ,SACRC,IAAM,qBAAoBG,IAIjBC,EAAiB,CAACC,EAAMC,GAAQ,IACpCR,eAAQ,CACbC,OAAQ,OACRC,IAAK,oBACLH,OAAQ,CACNS,SAEFD,SAISE,EAAgB,CAACJ,EAAIE,EAAMC,GAAQ,IACvCR,eAAQ,CACbC,OAAQ,MACRC,IAAM,qBAAoBG,EAC1BN,OAAQ,CACNS,SAEFD,SAISG,EAAgBL,GACpBL,eAAQ,CACbC,OAAQ,MACRC,IAAM,qBAAoBG,IAIjBM,EAAcJ,GAClBP,eAAQ,CACbC,OAAQ,OACRC,IAAK,uBAGLK,SAISK,EAAYC,GAChBb,eAAQ,CACbC,OAAQ,MACRC,IAAK,uBACLH,OAAQc,IAICC,EAAe,CAACT,EAAIU,IACxBf,eAAQ,CACbC,OAAQ,MACRC,IAAM,wBAAuBG,EAC7BE,KAAM,CAAEQ,aAICC,EAAcX,GAClBL,eAAQ,CACbC,OAAQ,SACRC,IAAM,wBAAuBG,IAIpBY,EAAgB,CAACZ,EAAIa,IACzBlB,eAAQ,CACbC,OAAQ,MACRC,IAAK,2BACLH,OAAQ,CACNoB,WAAYd,GAEdE,KAAM,CACJa,cAAeF,M,2CCjGrB,IAAIG,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,UAAU,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACJ,EAAG,gBAAgB,CAACG,MAAM,CAAC,UAAY,MAAM,CAACH,EAAG,qBAAqB,CAACG,MAAM,CAAC,GAAK,YAAY,CAACL,EAAIO,GAAG,QAAQL,EAAG,qBAAqB,CAACF,EAAIO,GAAG,WAAW,IAAI,GAAGL,EAAG,WAAW,CAACE,YAAY,aAAaI,YAAY,CAAC,MAAQ,QAAQH,MAAM,CAAC,KAAOL,EAAIS,UAAU,OAAS,GAAG,aAAa,QAAQ,CAACP,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,QAAQ,MAAQ,QAAQH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,sBAAsB,MAAQ,UAAUH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,qBAAqB,MAAQ,WAAWH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,MAAMK,YAAYV,EAAIW,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACd,EAAIO,GAAG,IAAIP,EAAIe,GAAGD,EAAME,IAAIC,eAAiB,KAAO,MAAM,YAAYf,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,MAAMK,YAAYV,EAAIW,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACZ,EAAG,YAAY,CAACG,MAAM,CAAC,eAAe,UAAU,iBAAiB,UAAU,SAAWS,EAAME,IAAIE,eAAeC,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOpB,EAAIqB,YAAYP,EAAME,OAAOM,MAAM,CAACC,MAAOT,EAAME,IAAIC,eAAgBO,SAAS,SAAUC,GAAMzB,EAAI0B,KAAKZ,EAAME,IAAK,iBAAkBS,IAAME,WAAW,sCAAsC,GAAGzB,EAAG,gBAAgB,CAACG,MAAM,CAAC,WAAa,GAAG,eAAeL,EAAI4B,KAAK,aAAa,CAAC,GAAI,GAAI,GAAI,KAAK,YAAY5B,EAAI6B,SAAS,OAAS,0CAA0C,MAAQ7B,EAAI8B,YAAYX,GAAG,CAAC,cAAcnB,EAAI+B,iBAAiB,iBAAiB/B,EAAIgC,oBAAoB,qBAAqB,SAASZ,GAAQpB,EAAI4B,KAAKR,GAAQ,sBAAsB,SAASA,GAAQpB,EAAI4B,KAAKR,GAAQ,kBAAkB,SAASA,GAAQpB,EAAI6B,SAAST,GAAQ,mBAAmB,SAASA,GAAQpB,EAAI6B,SAAST,OAAY,IAAI,IAE3zDa,EAAkB,G,YCiEP,GACfC,oBACAjD,OACA,OACAwB,aACAqB,aACAD,YACAD,SAGAO,UACA,oBAEAC,SACAC,iBACA,YACA7D,gBACA8D,wBACAV,OACAW,yBACA,SACAC,eACA,cAAAC,EAAAC,eAAA,YACAD,cACAE,qBAEA,iBACA,qBAGAZ,mBACA,qBAEAC,uBACA,qBAEAX,eACAuB,mBAEAjD,0DACAiD,mBACA,eACAC,eACAC,gDC9G8V,I,wBCQ1VC,EAAY,eACd,EACAhD,EACAkC,GACA,EACA,KACA,KACA,MAIa,aAAAc,E,6CCnBf","file":"js/chunk-491c82c8.d3774b5b.js","sourcesContent":["import request from '@/utils/request'\n\n/**\n * 文章相关请求接口  body 参数使用 data 设置  query 参数使用 params 设置  headers 参数使用 headers 设置\n */\nexport const getArticle = params => {\n  return request({\n    method: 'GET',\n    url: '/mp/v1_0/articles',\n    params\n  })\n}\n\nexport const getChannels = () => {\n  return request({\n    method: 'GET',\n    url: '/mp/v1_0/channels'\n  })\n}\n// 接口中有:XX 代表路径参数，需要拼接上参数\nexport const deleteArticle = id => {\n  return request({\n    method: 'DELETE',\n    url: `/mp/v1_0/articles/${id}`\n  })\n}\n\nexport const publishArticle = (data, draft = false) => {\n  return request({\n    method: 'POST',\n    url: '/mp/v1_0/articles',\n    params: {\n      draft\n    },\n    data\n  })\n}\n\nexport const updateArticle = (id, data, draft = false) => {\n  return request({\n    method: 'PUT',\n    url: `/mp/v1_0/articles/${id}`,\n    params: {\n      draft\n    },\n    data\n  })\n}\n\nexport const getOneArticle = id => {\n  return request({\n    method: 'GET',\n    url: `/mp/v1_0/articles/${id}`\n  })\n}\n\nexport const uploadImage = data => {\n  return request({\n    method: 'POST',\n    url: '/mp/v1_0/user/images',\n    // 一般文件上传的接口都要求把请求头中的 content-type 设置为multipart/form-data，\n    // 但是我们使用axios上传文件的话不需要手动设置，只需要给data一个formdata对象即可\n    data\n  })\n}\n\nexport const getImages = pageData => {\n  return request({\n    method: 'GET',\n    url: '/mp/v1_0/user/images',\n    params: pageData\n  })\n}\n\nexport const collectImage = (id, collect) => {\n  return request({\n    method: 'PUT',\n    url: `/mp/v1_0/user/images/${id}`,\n    data: { collect }\n  })\n}\n\nexport const deleteImage = id => {\n  return request({\n    method: 'DELETE',\n    url: `/mp/v1_0/user/images/${id}`\n  })\n}\n\nexport const updateComment = (id, allowComment) => {\n  return request({\n    method: 'PUT',\n    url: '/mp/v1_0/comments/status',\n    params: {\n      article_id: id\n    },\n    data: {\n      allow_comment: allowComment\n    }\n  })\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comment-container\"},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":\"/layout\"}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"评论管理\")])],1)],1),_c('el-table',{staticClass:\"table-list\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\",\"max-height\":\"370\"}},[_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"标题\"}}),_c('el-table-column',{attrs:{\"prop\":\"total_comment_count\",\"label\":\"总评论数\"}}),_c('el-table-column',{attrs:{\"prop\":\"fans_comment_count\",\"label\":\"粉丝评论数\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.comment_status ? '正常' : '关闭')+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"disabled\":scope.row.statusDisable},on:{\"change\":function($event){return _vm.editComment(scope.row)}},model:{value:(scope.row.comment_status),callback:function ($$v) {_vm.$set(scope.row, \"comment_status\", $$v)},expression:\"scope.row.comment_status\"}})]}}])})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.page,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.totalCount},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.page=$event},\"update:current-page\":function($event){_vm.page=$event},\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event}}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"comment-container\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <el-breadcrumb separator=\"/\">\n          <el-breadcrumb-item to=\"/layout\">首页</el-breadcrumb-item>\n          <el-breadcrumb-item>评论管理</el-breadcrumb-item>\n        </el-breadcrumb>\n      </div>\n      <el-table\n        class=\"table-list\"\n        :data=\"tableData\"\n        stripe\n        max-height=\"370\"\n        style=\"width: 100%\">\n        <el-table-column\n          prop=\"title\"\n          label=\"标题\"\n          >\n        </el-table-column>\n        <el-table-column\n          prop=\"total_comment_count\"\n          label=\"总评论数\"\n          >\n        </el-table-column>\n        <el-table-column\n          prop=\"fans_comment_count\"\n          label=\"粉丝评论数\"\n          >\n        </el-table-column>\n        <el-table-column\n          label=\"状态\"\n          >\n          <template slot-scope=\"scope\">\n           {{ scope.row.comment_status ? '正常' : '关闭' }}\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-switch\n              v-model=\"scope.row.comment_status\"\n              active-color=\"#13ce66\"\n              inactive-color=\"#ff4949\"\n              :disabled=\"scope.row.statusDisable\"\n              @change=\"editComment(scope.row)\">\n            </el-switch>\n            <!-- <el-button v-if=\"scope.row.comment_status\" type=\"danger\" size=\"small\" @click=\"editComment(scope.row)\">关闭评论</el-button>\n            <el-button v-else type=\"success\" size=\"small\" @click=\"editComment(scope.row)\">打开评论</el-button> -->\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        background\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"page\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size.sync=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"totalCount\"/>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getArticle, updateComment } from '@/api/article'\nexport default {\n  name: 'CommentIndex',\n  data () {\n    return {\n      tableData: [],\n      totalCount: 0,\n      pageSize: 10,\n      page: 1\n    }\n  },\n  created () {\n    this.loadArticle()\n  },\n  methods: {\n    loadArticle (page = 1) {\n      this.page = page\n      getArticle({\n        response_type: 'comment',\n        page,\n        per_page: this.pageSize\n      }).then(res => {\n        console.log(res)\n        const { results, total_count: totalCount } = res.data.data\n        results.forEach(item => {\n          item.statusDisable = false\n        })\n        this.tableData = results\n        this.totalCount = totalCount\n      })\n    },\n    handleSizeChange () {\n      this.loadArticle(1)\n    },\n    handleCurrentChange (val) {\n      this.loadArticle(val)\n    },\n    editComment (article) {\n      article.statusDisable = true\n      // article.comment_status = !article.comment_status\n      updateComment(article.id.toString(), article.comment_status).then(res => {\n        article.statusDisable = false\n        this.$message({\n          type: 'success',\n          message: article.comment_status ? '开启成功！' : '关闭成功！'\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.table-list{\n  margin-bottom: 30px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=15e28293&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=15e28293&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=15e28293&prod&lang=less&\""],"sourceRoot":""}