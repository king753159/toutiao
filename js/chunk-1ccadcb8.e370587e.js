(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ccadcb8"],{"12c8":function(t,e,a){},2423:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"e",(function(){return l})),a.d(e,"b",(function(){return o})),a.d(e,"h",(function(){return c})),a.d(e,"i",(function(){return n})),a.d(e,"g",(function(){return r})),a.d(e,"k",(function(){return d})),a.d(e,"f",(function(){return u})),a.d(e,"a",(function(){return p})),a.d(e,"c",(function(){return m})),a.d(e,"j",(function(){return g}));var i=a("b775");const s=t=>Object(i["a"])({method:"GET",url:"/mp/v1_0/articles",params:t}),l=()=>Object(i["a"])({method:"GET",url:"/mp/v1_0/channels"}),o=t=>Object(i["a"])({method:"DELETE",url:"/mp/v1_0/articles/"+t}),c=(t,e=!1)=>Object(i["a"])({method:"POST",url:"/mp/v1_0/articles",params:{draft:e},data:t}),n=(t,e,a=!1)=>Object(i["a"])({method:"PUT",url:"/mp/v1_0/articles/"+t,params:{draft:a},data:e}),r=t=>Object(i["a"])({method:"GET",url:"/mp/v1_0/articles/"+t}),d=t=>Object(i["a"])({method:"POST",url:"/mp/v1_0/user/images",data:t}),u=t=>Object(i["a"])({method:"GET",url:"/mp/v1_0/user/images",params:t}),p=(t,e)=>Object(i["a"])({method:"PUT",url:"/mp/v1_0/user/images/"+t,data:{collect:e}}),m=t=>Object(i["a"])({method:"DELETE",url:"/mp/v1_0/user/images/"+t}),g=(t,e)=>Object(i["a"])({method:"PUT",url:"/mp/v1_0/comments/status",params:{article_id:t},data:{allow_comment:e}})},"3c33":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"padding-bottom":"20px",display:"flex","justify-content":"space-between"}},[e("el-radio-group",{attrs:{size:"mini"},on:{change:t.changeCollect},model:{value:t.collect,callback:function(e){t.collect=e},expression:"collect"}},[e("el-radio-button",{attrs:{label:!1}},[t._v("全部")]),e("el-radio-button",{attrs:{label:!0}},[t._v("收藏")])],1),t.isShowAdd?e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.dialogUploadVisible=!0}}},[t._v("上传素材")]):t._e()],1),e("el-row",{staticStyle:{"padding-bottom":"20px"},attrs:{gutter:10}},t._l(t.pageList,(function(a,i){return e("el-col",{key:i,staticClass:"col",attrs:{xs:12,md:6,lg:4},nativeOn:{click:function(e){t.selected=i}}},[e("el-image",{staticStyle:{height:"180px",width:"180px"},attrs:{src:a.url,fit:"cover"}}),t.isShowSelected&&t.selected===i?e("div",{staticClass:"selected"}):t._e(),t.isShowAction?e("div",{staticClass:"collect-box"},[e("el-button",{attrs:{size:"mini",icon:a.is_collected?"el-icon-star-on":"el-icon-star-off",circle:"",loading:a.loading},on:{click:function(e){return t.onCollect(a)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.deleteImg(a.id)}}})],1):t._e()],1)})),1),e("el-pagination",{attrs:{layout:"prev, pager, next",background:"",total:t.totalCount,"page-size":t.pageSize,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.currentPage}}),e("el-dialog",{attrs:{title:"上传素材",width:"400px","append-to-body":!0,visible:t.dialogUploadVisible},on:{"update:visible":function(e){t.dialogUploadVisible=e}}},[e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"http://api-toutiao-web.itheima.net/mp/v1_0/user/images",headers:t.uploadHeaders,name:"image","on-success":t.onUploadSuccess,"show-file-list":!1,multiple:""}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),e("em",[t._v("点击上传")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1)},s=[],l=a("2423"),o={name:"imageList",props:{isShowAdd:{type:Boolean,default:!0},isShowAction:{type:Boolean,default:!0},isShowSelected:{type:Boolean,default:!1}},data(){const t=JSON.parse(window.sessionStorage.getItem("user"));return{radio1:"全部",pageList:[],totalCount:0,pageSize:10,page:1,collect:!1,dialogUploadVisible:!1,uploadHeaders:{Authorization:"Bearer "+t.token},selected:null}},created(){this.loadImages(1)},methods:{loadImages(t=1){this.page=t,Object(l["f"])({collect:this.collect,page:t,per_page:this.pageSize}).then(t=>{const e=t.data.data.results;e.forEach(t=>{t.loading=!1}),this.pageList=e,this.totalCount=t.data.data.total_count})},currentPage(t){this.loadImages(t)},changeCollect(){this.loadImages(1)},onUploadSuccess(){this.dialogUploadVisible=!1,this.loadImages(this.page),this.$message({type:"success",message:"上传成功！"})},onCollect(t){t.loading=!0,Object(l["a"])(t.id,!t.is_collected).then(e=>{t.is_collected=!t.is_collected,t.loading=!1})},deleteImg(t){this.$confirm("确定要删除图片吗?╮(╯﹏╰）╭","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(l["c"])(t).then(t=>{this.loadImages(this.page),this.$message({type:"success",message:"删除成功!"})})}).catch(t=>{console.log(t)})}}},c=o,n=(a("e6f7"),a("2877")),r=Object(n["a"])(c,i,s,!1,null,"ce0f9802",null);e["a"]=r.exports},e036:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"image-container"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:"/layout"}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("素材管理")])],1)],1),e("image-list")],1)],1)},s=[],l=a("3c33"),o={name:"ImageIndex",components:{ImageList:l["a"]}},c=o,n=a("2877"),r=Object(n["a"])(c,i,s,!1,null,null,null);e["default"]=r.exports},e6f7:function(t,e,a){"use strict";a("12c8")}}]);
//# sourceMappingURL=chunk-1ccadcb8.e370587e.js.map