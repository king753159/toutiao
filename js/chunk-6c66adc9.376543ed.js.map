{"version":3,"sources":["webpack:///./src/components/image-list/index.vue?7357","webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./src/api/article.js","webpack:///./src/components/image-list/index.vue?83c7","webpack:///src/components/image-list/index.vue","webpack:///./src/components/image-list/index.vue?429e","webpack:///./src/components/image-list/index.vue","webpack:///./node_modules/core-js/internals/array-species-create.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/internals/array-iteration.js","webpack:///./src/views/image/index.vue?4953","webpack:///src/views/image/index.vue","webpack:///./src/views/image/index.vue?c518","webpack:///./src/views/image/index.vue","webpack:///./node_modules/core-js/internals/is-array.js"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","STRICT_METHOD","module","exports","callbackfn","this","arguments","length","undefined","getArticle","params","request","method","url","getChannels","deleteArticle","id","publishArticle","data","draft","updateArticle","getOneArticle","uploadImage","getImages","pageData","collectImage","collect","deleteImage","updateComment","allowComment","article_id","allow_comment","render","_vm","_h","$createElement","_c","_self","staticStyle","attrs","on","changeCollect","model","value","callback","$$v","expression","_v","$event","dialogUploadVisible","_e","_l","img","index","key","staticClass","nativeOn","selected","isShowSelected","is_collected","loading","onCollect","deleteImg","totalCount","pageSize","page","currentPage","uploadHeaders","onUploadSuccess","slot","staticRenderFns","name","props","isShowAdd","type","Boolean","default","isShowAction","radio1","pageList","Authorization","created","loadImages","methods","per_page","results","item","$message","message","imgData","$confirm","confirmButtonText","cancelButtonText","console","log","component","isObject","isArray","wellKnownSymbol","SPECIES","originalArray","C","constructor","Array","fails","METHOD_NAME","argument","call","bind","IndexedObject","toObject","toLength","arraySpeciesCreate","push","createMethod","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_OUT","NO_HOLES","$this","that","specificCreate","result","O","self","boundFunction","create","target","map","filter","some","every","find","findIndex","filterOut","components","ImageList","classof","arg"],"mappings":"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","file":"js/chunk-6c66adc9.376543ed.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=ce0f9802&lang=less&scoped=true&\"","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","import request from '@/utils/request'\n\n/**\n * 文章相关请求接口  body 参数使用 data 设置  query 参数使用 params 设置  headers 参数使用 headers 设置\n */\nexport const getArticle = params => {\n  return request({\n    method: 'GET',\n    url: '/mp/v1_0/articles',\n    params\n  })\n}\n\nexport const getChannels = () => {\n  return request({\n    method: 'GET',\n    url: '/mp/v1_0/channels'\n  })\n}\n// 接口中有:XX 代表路径参数，需要拼接上参数\nexport const deleteArticle = id => {\n  return request({\n    method: 'DELETE',\n    url: `/mp/v1_0/articles/${id}`\n  })\n}\n\nexport const publishArticle = (data, draft = false) => {\n  return request({\n    method: 'POST',\n    url: '/mp/v1_0/articles',\n    params: {\n      draft\n    },\n    data\n  })\n}\n\nexport const updateArticle = (id, data, draft = false) => {\n  return request({\n    method: 'PUT',\n    url: `/mp/v1_0/articles/${id}`,\n    params: {\n      draft\n    },\n    data\n  })\n}\n\nexport const getOneArticle = id => {\n  return request({\n    method: 'GET',\n    url: `/mp/v1_0/articles/${id}`\n  })\n}\n\nexport const uploadImage = data => {\n  return request({\n    method: 'POST',\n    url: '/mp/v1_0/user/images',\n    // 一般文件上传的接口都要求把请求头中的 content-type 设置为multipart/form-data，\n    // 但是我们使用axios上传文件的话不需要手动设置，只需要给data一个formdata对象即可\n    data\n  })\n}\n\nexport const getImages = pageData => {\n  return request({\n    method: 'GET',\n    url: '/mp/v1_0/user/images',\n    params: pageData\n  })\n}\n\nexport const collectImage = (id, collect) => {\n  return request({\n    method: 'PUT',\n    url: `/mp/v1_0/user/images/${id}`,\n    data: { collect }\n  })\n}\n\nexport const deleteImage = id => {\n  return request({\n    method: 'DELETE',\n    url: `/mp/v1_0/user/images/${id}`\n  })\n}\n\nexport const updateComment = (id, allowComment) => {\n  return request({\n    method: 'PUT',\n    url: '/mp/v1_0/comments/status',\n    params: {\n      article_id: id\n    },\n    data: {\n      allow_comment: allowComment\n    }\n  })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"padding-bottom\":\"20px\",\"display\":\"flex\",\"justify-content\":\"space-between\"}},[_c('el-radio-group',{attrs:{\"size\":\"mini\"},on:{\"change\":_vm.changeCollect},model:{value:(_vm.collect),callback:function ($$v) {_vm.collect=$$v},expression:\"collect\"}},[_c('el-radio-button',{attrs:{\"label\":false}},[_vm._v(\"全部\")]),_c('el-radio-button',{attrs:{\"label\":true}},[_vm._v(\"收藏\")])],1),(_vm.isShowAdd)?_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.dialogUploadVisible = true}}},[_vm._v(\"上传素材\")]):_vm._e()],1),_c('el-row',{staticStyle:{\"padding-bottom\":\"20px\"},attrs:{\"gutter\":10}},_vm._l((_vm.pageList),function(img,index){return _c('el-col',{key:index,staticClass:\"col\",attrs:{\"xs\":12,\"md\":6,\"lg\":4},nativeOn:{\"click\":function($event){_vm.selected = index}}},[_c('el-image',{staticStyle:{\"height\":\"180px\",\"width\":\"180px\"},attrs:{\"src\":img.url,\"fit\":\"cover\"}}),(_vm.isShowSelected && _vm.selected === index)?_c('div',{staticClass:\"selected\"}):_vm._e(),(_vm.isShowAction)?_c('div',{staticClass:\"collect-box\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":img.is_collected ? 'el-icon-star-on' : 'el-icon-star-off',\"circle\":\"\",\"loading\":img.loading},on:{\"click\":function($event){return _vm.onCollect(img)}}}),_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteImg(img.id)}}})],1):_vm._e()],1)}),1),_c('el-pagination',{attrs:{\"layout\":\"prev, pager, next\",\"background\":\"\",\"total\":_vm.totalCount,\"page-size\":_vm.pageSize,\"current-page\":_vm.page},on:{\"update:currentPage\":function($event){_vm.page=$event},\"update:current-page\":function($event){_vm.page=$event},\"current-change\":_vm.currentPage}}),_c('el-dialog',{attrs:{\"title\":\"上传素材\",\"width\":\"400px\",\"append-to-body\":true,\"visible\":_vm.dialogUploadVisible},on:{\"update:visible\":function($event){_vm.dialogUploadVisible=$event}}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":\"http://api-toutiao-web.itheima.net/mp/v1_0/user/images\",\"headers\":_vm.uploadHeaders,\"name\":\"image\",\"on-success\":_vm.onUploadSuccess,\"show-file-list\":false,\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过500kb\")])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n      <div style=\"padding-bottom:20px;display: flex;justify-content: space-between;\">\n        <el-radio-group v-model=\"collect\" size=\"mini\" @change=\"changeCollect\">\n          <el-radio-button :label=\"false\">全部</el-radio-button>\n          <el-radio-button :label=\"true\" >收藏</el-radio-button>\n        </el-radio-group>\n        <el-button type=\"success\" size=\"mini\" v-if=\"isShowAdd\" @click=\"dialogUploadVisible = true\">上传素材</el-button>\n      </div>\n      <el-row :gutter=\"10\" style=\"padding-bottom:20px;\">\n          <el-col class=\"col\" :xs=\"12\" :md=\"6\" :lg=\"4\" @click.native=\"selected = index\" v-for=\"(img,index) in pageList\" :key=\"index\">\n            <el-image\n            style=\"height:180px;width:180px;\"\n            :src=\"img.url\"\n            fit=\"cover\">\n            </el-image>\n            <div class=\"selected\" v-if=\"isShowSelected && selected === index\"></div>\n            <div class=\"collect-box\" v-if=\"isShowAction\">\n              <el-button\n              size=\"mini\"\n              :icon=\"img.is_collected ? 'el-icon-star-on' : 'el-icon-star-off'\"\n              @click=\"onCollect(img)\"\n              circle\n              :loading=\"img.loading\"\n              >\n              </el-button>\n              <el-button size=\"mini\" icon=\"el-icon-delete\" circle @click=\"deleteImg(img.id)\"></el-button>\n              <!-- <i :class=\"img.is_collected ? 'el-icon-star-on' : 'el-icon-star-off'\" @click=\"onCollect(img)\"></i> -->\n              <!-- <i class=\"el-icon-delete\" @click=\"deleteImg(img.id)\"></i> -->\n            </div>\n          </el-col>\n        </el-row>\n        <el-pagination\n          layout=\"prev, pager, next\"\n          background\n          :total=\"totalCount\"\n          :page-size=\"pageSize\"\n          :current-page.sync=\"page\"\n          @current-change=\"currentPage\">\n        </el-pagination>\n        <el-dialog title=\"上传素材\" width=\"400px\" :append-to-body=\"true\" :visible.sync=\"dialogUploadVisible\">\n          <el-upload\n            class=\"upload-demo\"\n            drag\n            action=\"http://api-toutiao-web.itheima.net/mp/v1_0/user/images\"\n            :headers= \"uploadHeaders\"\n            name=\"image\"\n            :on-success=\"onUploadSuccess\"\n            :show-file-list=\"false\"\n            multiple>\n            <i class=\"el-icon-upload\"></i>\n            <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n            <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\n          </el-upload>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { getImages, collectImage, deleteImage } from '@/api/article'\nexport default {\n  name: 'imageList',\n  props: {\n    isShowAdd: {\n      type: Boolean,\n      default: true\n    },\n    isShowAction: {\n      type: Boolean,\n      default: true\n    },\n    isShowSelected: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    const user = JSON.parse(window.sessionStorage.getItem('user'))\n    return {\n      radio1: '全部',\n      pageList: [],\n      totalCount: 0,\n      pageSize: 10,\n      page: 1,\n      collect: false,\n      dialogUploadVisible: false,\n      uploadHeaders: {\n        Authorization: `Bearer ${user.token}`\n      },\n      selected: null\n    }\n  },\n  created () {\n    this.loadImages(1)\n  },\n  methods: {\n    loadImages (page = 1) {\n      this.page = page\n      getImages({\n        collect: this.collect,\n        page,\n        per_page: this.pageSize\n      }).then(res => {\n        const results = res.data.data.results\n        results.forEach(item => {\n          item.loading = false\n        })\n        this.pageList = results\n        this.totalCount = res.data.data.total_count\n      })\n    },\n    currentPage (page) {\n      this.loadImages(page)\n    },\n    changeCollect () {\n      this.loadImages(1)\n    },\n    onUploadSuccess () {\n      this.dialogUploadVisible = false\n      this.loadImages(this.page)\n      this.$message({\n        type: 'success',\n        message: '上传成功！'\n      })\n    },\n    onCollect (imgData) {\n      imgData.loading = true\n      collectImage(imgData.id, !imgData.is_collected).then(res => {\n        imgData.is_collected = !imgData.is_collected\n        imgData.loading = false\n      })\n    },\n    deleteImg (id) {\n      this.$confirm('确定要删除图片吗?╮(╯﹏╰）╭', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        deleteImage(id).then(res => {\n          this.loadImages(this.page)\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n        })\n      }).catch((error) => {\n        console.log(error)\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.col{\n  position: relative;\n  .collect-box{\n    width: 180px;\n    height:30px;\n    background-color:rgba(204, 204, 204, .5);\n    position: absolute;\n    bottom: 4px;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    .el-icon-star-on{\n      color:red;\n    }\n  }\n}\n.selected{\n  background: url('../../assets/selected.jpg') no-repeat;\n  background-size: 100%;\n  width: 100px;\n  height: 100px;\n  position: absolute;\n  top: 40px;\n  left: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  opacity: 0.5;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ce0f9802&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=ce0f9802&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ce0f9802\",\n  null\n  \n)\n\nexport default component.exports","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_OUT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push.call(target, value); // filterOut\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterOut` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterOut: createMethod(7)\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"image-container\"},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":\"/layout\"}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"素材管理\")])],1)],1),_c('image-list')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"image-container\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <el-breadcrumb separator=\"/\">\n          <el-breadcrumb-item to=\"/layout\">首页</el-breadcrumb-item>\n          <el-breadcrumb-item>素材管理</el-breadcrumb-item>\n        </el-breadcrumb>\n      </div>\n      <image-list/>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport ImageList from '@/components/image-list'\nexport default {\n  name: 'ImageIndex',\n  components: {\n    ImageList\n  }\n}\n</script>\n\n<style lang=\"less\"></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1e68a330&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n"],"sourceRoot":""}